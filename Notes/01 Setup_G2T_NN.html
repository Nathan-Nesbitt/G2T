<!DOCTYPE html>
<html>
<head>
<title>01 Setup_G2T_NN.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="set-up-virtualbox-for-lamp-server-development">Set up virtualbox for LAMP server development</h1>
<h2 id="optimal-just-run-linux">(Optimal) Just run linux</h2>
<p>If you have your own machine, just run some distribution of linux. Real development is easiest when done on linux as you
will have to do less hacky workarounds.</p>
<h2 id="wsl">WSL</h2>
<p>If you are lucky you may be able to install WSL or Windows Subsystem for Linux. This is the linux kernel/ubuntu operating system
which runs on top of Windows. You can simply install this from the Windows store, and requires a powershell command to be run for
it to be enabled. I will not be running through that installation in this document because there are many good resources which can
be found online for installing it.</p>
<p>If installing through WSL simply skip to the Installing LAMP Stack section.</p>
<h2 id="setting-up-virtualbox-with-an-ubuntu-vm">Setting up virtualbox with an ubuntu VM</h2>
<ol>
<li>Install virtualbox from https://www.virtualbox.org/</li>
<li>Install all required dependencies</li>
<li>Download the ubuntu server https://ubuntu.com/download/server</li>
<li>Create a new VM, follow basic steps</li>
<li>Once the vm has been created, right click on the new VM -&gt; settings-&gt;storage-&gt;controller:IDE and create a new disk with the ISO for ubuntu server</li>
<li>We also need to go into settings-&gt;network-&gt;advanced-&gt;port forwarding and add an apache TCP port forward for host port 8080 and guest port 80 and an SSH TCP port for host port 2222 and guest port 22.</li>
<li>Start the VM</li>
<li>Install OPENSSH server using the prompt</li>
<li>Follow the rest of the instructions to create the VM</li>
<li>Reboot the server when all on-screen steps have completed</li>
</ol>
<p>Once the server has rebooted, we now want to ensure that all packages are updated</p>
<ol>
<li><code>sudo apt-get update</code></li>
<li><code>sudo apt-get upgrade</code></li>
</ol>
<h2 id="installing-lamp-stack">Installing LAMP stack</h2>
<ol>
<li>Ensure that all packages are installed <code>sudo apt update</code></li>
<li>Install apache2 <code>sudo apt install apache2</code></li>
<li>Install mysql-server <code>sudo apt install mysql-server</code></li>
<li>Install PHP <code>sudo apt install php libapache2-mod-php php-mysql</code></li>
</ol>
<h2 id="setting-up-apache2">Setting up apache2</h2>
<ol>
<li>
<p>Creating a working directory for your project <code>sudo mkdir /var/www/&lt;projectName&gt;</code></p>
</li>
<li>
<p>Create a link for your projecty directory somewhere else so you can work/push to it <code>ln -s  ~/&lt;projectName&gt; /var/www/&lt;projectName&gt;</code></p>
</li>
<li>
<p>Change the ownership of that directory <code>chown g2t:g2t ~/&lt;projectName&gt;</code></p>
</li>
<li>
<p>Create a temporary file to show that it is working <code>sudo touch ~/&lt;projectName&gt;/index.html</code></p>
</li>
<li>
<p>Open the index file you created <code>vim ~/&lt;projectName&gt;/index.html</code></p>
</li>
<li>
<p>Write the 'hello world' to the index file so it looks like...</p>
<pre class="hljs"><code><div>&lt;html&gt;
    &lt;body&gt;
        &lt;h1&gt;Success! Or hello world or whatever!&lt;/h1&gt;
    &lt;/body&gt;
&lt;/html&gt;

</div></code></pre>
</li>
<li>
<p>Modify the apache .conf files so they server up your page when you access the server <code>sudo vim /etc/apache2/sites-available/000-default.conf</code></p>
<pre class="hljs"><code><div># Change the line 

DocumentRoot /var/www/html/

# to be the folder you created earlier

DocumentRoot /var/www/&lt;projectName&gt;

## OR

# If you have multiple projects on one server and don't care about proper redirects you can set it to

DocumentRoot /var/www/
</div></code></pre>
</li>
</ol>
<p>You should now be able to go to a local browser, and type in localhost:8080 and connect to your webserver. If this doesn't work you may have to restart apache <code>sudo systemctl restart apache2</code></p>
<p>If you want to make it so you have your own file for each project you work on and you are hosting with a domain name, you can use the following [note we do not have a domain name, or a public server so this will not work for you]:</p>
<ol>
<li>Create a new config file for the server <code>sudo vim /etc/apache2/sites-available/&lt;projectName&gt;.conf</code><pre class="hljs"><code><div>&lt;VirtualHost *:80&gt;
    ServerAdmin webmaster@localhost
    ServerName &lt;DomainName&gt;
    ServerAlias www.&lt;DomainName&gt;
    DocumentRoot /var/www/&lt;projectName&gt;
    ErrorLog ${APACHE_LOG_DIR}/&lt;DomainName&gt;-error.log
    CustomLog ${APACHE_LOG_DIR}/&lt;DomainName&gt;-access.log combined
&lt;/VirtualHost&gt;
</div></code></pre>
</li>
<li>Add this new config file <code>sudo a2ensite &lt;DomainName&gt;.conf</code></li>
<li>Remove the default config file <code>sudo a2dissite 000-default.conf</code></li>
<li>Restart apache <code>sudo systemctl restart apache2</code></li>
</ol>
<p>The ErrorLog and the CustomLog lines can optionally be left without the <DomainName> attribute if you want all of the logs in one file.</p>
<h2 id="setting-up-mysql">Setting up mysql</h2>
<ol>
<li>Optionally run the secure installation script (this will force you to use strong passwords) <code>sudo mysql_secure_installation</code></li>
<li>Make sur that mysql is running <code>sudo systemctl start mysql</code></li>
</ol>
<p>We will go into creating users and databases later in the course.</p>
<h2 id="setting-up-php">Setting up PHP</h2>
<ol>
<li>
<p>Tell apache to serve up index.php files <code>sudo vim /etc/apache2/mods-enabled/dir.conf</code></p>
<pre class="hljs"><code><div># Change this line
DirectoryIndex index.html index.cgi index.pl index.xhtml index.htm

# So it has index.php
DirectoryIndex index.php index.html index.cgi index.pl index.xhtml index.htm
</div></code></pre>
</li>
<li>
<p>Restart apache to see the changes <code>sudo systemctl restart apache2</code></p>
</li>
<li>
<p>Install the command line interface for PHP [optional, as this is more for debugging] <code>sudo apt install php-cli</code></p>
</li>
<li>
<p>Now if you want to go check to see if your server is running PHP properly you can create a new file in the server working directory <code>vim ~/&lt;projectName&gt;/test.php</code> and put the following code in it</p>
<pre class="hljs"><code><div>&lt;?php
phpinfo();
?&gt;
</div></code></pre>
</li>
</ol>
<p>Now if you go to <code>localhost:8080/test.php</code> the PHP info page should show up. <strong>Don't leave this page up after this as there is information about the server in this file</strong></p>
<h1 id="setting-up-your-local-device-for-development">Setting up your local device for development</h1>
<p>For the following example we are going to be using unix commands to transfer and connect to our server/VM. Since we need to use SSH and rsync to connect and transfer files, the 'easiest' way of getting these tools is to install the WSL or <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">windows subsystem for linux </a> or, if you are working in an environment where you cannot install WSL, you can use <a href="https://www.cygwin.com/">Cygwin</a>. Since in the current environment we cannot install WSL, the following steps will outline the cygwin installation process.</p>
<ol>
<li>Go to the Cygwin site and download the Windows executable</li>
<li>Follow the instructions for the basic installation, until you get to the available download sites</li>
<li>Choose a domain to download from (e.g. mirroir.csclub.waterloo.ca)</li>
<li>Change the view from <em>pending</em> to <em>not installed</em></li>
<li>Search for <code>rsync</code> and <code>openssh</code></li>
<li>For <code>rsync</code> and <code>openssh</code>change the 'new' column from <code>skip</code> to the version number</li>
</ol>
<p>We can now run cygwin and use SSH, and rsync on our system.</p>
<h2 id="ssh-into-your-box">SSH into your box</h2>
<p>Earlier we port-forwarded both port 80 (HTTP) and 22 (SSH) on our virtual machine to ports 8080 and 2222. From the previous steps we can see that we used port 8080 to connect to the sample website we have created, but why would we want to port forward 22?</p>
<p>In most 'real' situations we are often not able to plug a keyboard and monitor into the machine where our webserver is running. Some servers are even hosted in other countries. So how would we connect and manage these servers without having a direct connection to them? Simple! Use SSH!</p>
<h3 id="how-to-use-ssh">How to use SSH</h3>
<p><code>ssh [-p portNumber] [username@]host</code></p>
<p>An example for how I would connect to my server:</p>
<p><code>ssh -p 2222 g2t@localhost</code></p>
<p>This will ask you for a password, and then will allow you to remote connect in. You will be able to use the same commands as when you were logged into the VM.</p>
<h2 id="setting-up-rsync">Setting up rsync</h2>
<p>Rsync is a useful command for syncing files between two devices. In our case, we are going to be writing code on our devices and will be transferring it to our server (the VM). We don't want to have to manually move the files every time we make a change, so we can write a little script to run every time to update the files on the server using rsync.</p>
<h3 id="how-to-use-rsync">How to use rsync</h3>
<p><code>rsync -rvz -e 'ssh -p [port number]' /some/path/on/our/device [user@]host:/path/on/the/server</code></p>
<p>So for example I can use the following:</p>
<p><code>rsync -rvz -e 'ssh -p 2222' ~/Documents/G2T/myProject g2t@localhost:/home/g2t/myProject</code></p>
<h2 id="setting-up-a-script-for-this-command">Setting up a script for this command</h2>
<p>So anytime we want to sync our project from the desktop to our server, we can run that command. But it is really long, so we can put it in a shell script instead, and just run the shell script when we want to sync our project.</p>
<ol>
<li>Create a new file called syncScript.sh <code>touch syncScript.sh</code></li>
<li>Edit that file <code>vim syncScript.sh</code> and add our code:</li>
</ol>
<pre class="hljs"><code><div>rsync -rvz -e 'ssh -p 2222' ~/Documents/G2T/myProject g2t@localhost:/home/g2t/myProject
</div></code></pre>
<ol start="3">
<li>Change the permissions on the file so it is executable. <code>chmod +x syncScript.sh</code></li>
</ol>
<p>Now we can simply run <code>./syncScript.sh</code> anytime we want to sync our project to a folder.</p>
<h2 id="github-only-for-reference">GitHub (ONLY FOR REFERENCE)</h2>
<p>Once you get more experienced it is useful to know how to use the git CLI, but for now we can use the github desktop client which can be found <a href="https://desktop.github.com/">here</a>.</p>
<h3 id="setting-up-git">Setting up git</h3>
<ol>
<li>
<p>Download it and run the installer</p>
</li>
<li>
<p>Log in</p>
</li>
<li>
<p>Create a new repository (file -&gt; new repository)</p>
<p>a. Call the repository your project name</p>
<p>b. Give it a description (what is this code)</p>
<p>c. Point it to the directory where your code is on the machine</p>
</li>
<li>
<p>Create the repository</p>
</li>
</ol>
<h3 id="using-git">Using git</h3>
<p>This is not the best way of using git, as there is a workflow for when you are working on a project with other people. But for now we will be using it to back up our code.</p>
<p>When you make changes to any code in the git directory, the changes are reflected in the git client.</p>
<p>When you have made a sufficient amount of changes, you can choose which files to commit to the master branch (on your computer) and simply click the <code>commit to master</code> button. This should be done for every problem that you solve (I normally do it for each bug I solve).</p>
<p>When you want to push your changes to github (so they are saved outside your machine) you can click on the <code>push origin</code> button. You should now be able to visit your git page and view the changes.</p>
<hr>
<p><small>© Nathan Nesbitt, 2019. Not to be copied, used, or revised without express written permission from the copyright owner.</small></p>

</body>
</html>
